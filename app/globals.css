@import "tailwindcss";

:root {
  /* Light, airy palette with subtle watermelon-inspired accents */
  --background: #fafafa;
  --foreground: #1a1a1a;
  --primary: #2d3748;
  --primary-light: #4a5568;
  --accent: #e63946;
  --accent-soft: #ffe8e9;
  --success: #74c69d;
  --danger: #e63946;
  --warm: #f6ad55;
  --melon-green: #1a4d2e;
  --melon-green-light: #74c69d;
  --melon-red: #e63946;
  --card-bg: #ffffff;
  --card-border: #e8e8e8;
  --hover-bg: #f7f7f7;
}

/* Dark mode color palette */
html[data-theme="dark"] {
  --background: #1a1a1a;
  --foreground: #f0f0f0;
  --primary: #e8e8e8;
  --primary-light: #a0a0a0;
  --accent: #ff6b7a;
  --accent-soft: #3a1f21;
  --success: #68b892;
  --danger: #ff6b7a;
  --warm: #ffb366;
  --melon-green: #74c69d;
  --melon-green-light: #a8dcc0;
  --melon-red: #ff6b7a;
  --card-bg: #2a2a2a;
  --card-border: #404040;
  --hover-bg: #333333;
}

/* Dark mode overrides for hardcoded Tailwind classes */
html[data-theme="dark"] .bg-white,
html[data-theme="dark"] [class*="bg-white/"] {
  background-color: var(--card-bg) !important;
}

html[data-theme="dark"] .text-black {
  color: var(--foreground) !important;
}

/* Keep text-white on buttons/accent backgrounds (intentional) */
html[data-theme="dark"] .bg-accent .text-white,
html[data-theme="dark"] .bg-primary .text-white,
html[data-theme="dark"] .bg-danger .text-white {
  color: white !important;
}

html[data-theme="dark"] .border-gray-200,
html[data-theme="dark"] .border-gray-300 {
  border-color: var(--card-border) !important;
}

html[data-theme="dark"] .bg-gray-50,
html[data-theme="dark"] .bg-gray-100 {
  background-color: var(--hover-bg) !important;
}

html[data-theme="dark"] .text-gray-400,
html[data-theme="dark"] .text-gray-500,
html[data-theme="dark"] .text-gray-600 {
  color: var(--primary-light) !important;
}

html[data-theme="dark"] .text-gray-700,
html[data-theme="dark"] .text-gray-800,
html[data-theme="dark"] .text-gray-900 {
  color: var(--foreground) !important;
}

/* Auto theme: respect system preference */
@media (prefers-color-scheme: dark) {
  html[data-theme="auto"] {
    --background: #1a1a1a;
    --foreground: #f0f0f0;
    --primary: #e8e8e8;
    --primary-light: #a0a0a0;
    --accent: #ff6b7a;
    --accent-soft: #3a1f21;
    --success: #68b892;
    --danger: #ff6b7a;
    --warm: #ffb366;
    --melon-green: #74c69d;
    --melon-green-light: #a8dcc0;
    --melon-red: #ff6b7a;
    --card-bg: #2a2a2a;
    --card-border: #404040;
    --hover-bg: #333333;
  }

  /* Dark mode overrides for auto mode */
  html[data-theme="auto"] .bg-white,
  html[data-theme="auto"] [class*="bg-white/"] {
    background-color: var(--card-bg) !important;
  }

  html[data-theme="auto"] .text-black {
    color: var(--foreground) !important;
  }

  /* Keep text-white on buttons/accent backgrounds (intentional) */
  html[data-theme="auto"] .bg-accent .text-white,
  html[data-theme="auto"] .bg-primary .text-white,
  html[data-theme="auto"] .bg-danger .text-white {
    color: white !important;
  }

  html[data-theme="auto"] .border-gray-200,
  html[data-theme="auto"] .border-gray-300 {
    border-color: var(--card-border) !important;
  }

  html[data-theme="auto"] .bg-gray-50,
  html[data-theme="auto"] .bg-gray-100 {
    background-color: var(--hover-bg) !important;
  }

  html[data-theme="auto"] .text-gray-400,
  html[data-theme="auto"] .text-gray-500,
  html[data-theme="auto"] .text-gray-600 {
    color: var(--primary-light) !important;
  }

  html[data-theme="auto"] .text-gray-700,
  html[data-theme="auto"] .text-gray-800,
  html[data-theme="auto"] .text-gray-900 {
    color: var(--foreground) !important;
  }
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-primary: var(--primary);
  --color-primary-light: var(--primary-light);
  --color-accent: var(--accent);
  --color-accent-soft: var(--accent-soft);
  --color-success: var(--success);
  --color-danger: var(--danger);
  --color-warm: var(--warm);
  --color-melon-green: var(--melon-green);
  --color-melon-green-light: var(--melon-green-light);
  --color-melon-red: var(--melon-red);
  --color-card-bg: var(--card-bg);
  --color-card-border: var(--card-border);
  --color-hover-bg: var(--hover-bg);
  --font-sans: var(--font-quicksand), -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans);
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  line-height: 1.6;
  position: relative;
}

/* ============================================
   PHASE 0: ANTI-GENERIC DESIGN - TEXTURES
   ============================================ */

/* Paper grain texture overlay */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0.03;
  z-index: -1;
  background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJhIiB4PSIwIiB5PSIwIj48ZmVUdXJidWxlbmNlIGJhc2VGcmVxdWVuY3k9Ii43NSIgc3RpdGNoVGlsZXM9InN0aXRjaCIgdHlwZT0iZnJhY3RhbE5vaXNlIi8+PGZlQ29sb3JNYXRyaXggdHlwZT0ic2F0dXJhdGUiIHZhbHVlcz0iMCIvPjwvZmlsdGVyPjxwYXRoIGQ9Ik0wIDBoMzAwdjMwMEgweiIgZmlsdGVyPSJ1cmwoI2EpIiBvcGFjaXR5PSIuMDUiLz48L3N2Zz4=');
  pointer-events: none;
}

/* Watermelon seed pattern background (very subtle) */
.page-background {
  position: relative;
}

.page-background::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0.02;
  z-index: -1;
  background-image: radial-gradient(circle at 20% 30%, #1a1a1a 2px, transparent 2px),
                    radial-gradient(circle at 60% 70%, #1a1a1a 2px, transparent 2px),
                    radial-gradient(circle at 80% 40%, #1a1a1a 2px, transparent 2px);
  background-size: 200px 200px, 180px 180px, 220px 220px;
  background-position: 0 0, 50px 50px, 100px 100px;
  pointer-events: none;
}

/* Organic gradient (not linear) */
.card-organic-bg {
  background:
    radial-gradient(ellipse at top left, var(--success) 0%, transparent 50%),
    radial-gradient(ellipse at bottom right, var(--accent) 0%, transparent 50%),
    var(--card-bg);
  background-blend-mode: soft-light;
}

/* Watercolor-style soft edges for cards */
.card-watercolor {
  position: relative;
  background: var(--card-bg);
  border-radius: 16px;
  overflow: hidden;
}

.card-watercolor::before {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(ellipse at 20% 30%, rgba(116, 198, 157, 0.08) 0%, transparent 60%),
              radial-gradient(ellipse at 80% 70%, rgba(230, 57, 70, 0.06) 0%, transparent 60%);
  pointer-events: none;
  z-index: 0;
}

.card-watercolor > * {
  position: relative;
  z-index: 1;
}

/* Organic border radius (not uniform) */
.card-organic {
  border-radius: 18px 16px 20px 15px;
}

/* ============================================
   PHASE 0: CUSTOM CURSOR STATES
   ============================================ */

/* Custom cursor for interactive elements */
.cursor-melon {
  cursor: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI4IiBmaWxsPSIjZTYzOTQ2IiBvcGFjaXR5PSIwLjgiLz48Y2lyY2xlIGN4PSIxMiIgY3k9IjEyIiByPSI0IiBmaWxsPSIjMWE0ZDJlIiBvcGFjaXR5PSIwLjYiLz48L3N2Zz4=') 12 12, auto;
}

/* Apply to draggable items */
[draggable="true"] {
  cursor: grab;
}

[draggable="true"]:active {
  cursor: grabbing;
}

/* Watermelon slice cursor for game interactions */
.game-interactive {
  cursor: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMTYgNEw0IDI4aDI0TDE2IDR6IiBmaWxsPSIjZTYzOTQ2Ii8+PHBhdGggZD0iTTE2IDhMOCAyNGgxNkwxNiA4eiIgZmlsbD0iIzFhNGQyZSIvPjwvc3ZnPg==') 16 16, pointer;
}

/* ============================================
   PHASE 0: TYPOGRAPHY TREATMENTS
   ============================================ */

/* Headings with subtle text shadow for depth */
h1, h2, h3 {
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

/* Display text with custom letter spacing */
.display-organic {
  font-variation-settings: 'wght' 700;
  letter-spacing: -0.02em;
}

/* Emphasis text with watermelon accent underline */
.text-emphasis {
  position: relative;
  display: inline-block;
}

.text-emphasis::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  height: 3px;
  background: var(--accent);
  opacity: 0.3;
  border-radius: 2px;
  transform: skewX(-10deg);
}

/* Pull quotes with organic shape */
.pull-quote {
  position: relative;
  padding: 2rem;
  margin: 2rem 0;
  background: var(--card-bg);
  border-left: 4px solid var(--accent);
  border-radius: 4px 16px 16px 4px;
  font-style: italic;
}

.pull-quote::before {
  content: '"';
  position: absolute;
  top: -10px;
  left: 10px;
  font-size: 4rem;
  color: var(--accent);
  opacity: 0.2;
  font-family: Georgia, serif;
}

/* Respect user motion preferences */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Gentle fade-in for page loads */
@keyframes gentle-fade {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Subtle lift on hover */
@keyframes soft-lift {
  to {
    transform: translateY(-2px);
  }
}

.animate-fade {
  animation: gentle-fade 0.4s ease-out;
}

/* Slide-in animation for accessibility panel */
@keyframes slide-in {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

.animate-slide-in {
  animation: slide-in 0.2s ease-out;
}

.hover-lift {
  transition: transform 75ms ease-in-out, box-shadow 75ms ease-in-out;
}

.hover-lift:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

/* Skip to content link for keyboard users */
.skip-to-content {
  position: absolute;
  top: -100px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--primary);
  color: white;
  padding: 0.75rem 1.5rem;
  border-radius: 0.5rem;
  font-weight: 500;
  z-index: 100;
  transition: top 0.2s;
}

.skip-to-content:focus {
  top: 1rem;
}

/* Minimal shadows */
.soft-shadow {
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.06);
}

.soft-shadow-md {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.soft-shadow-lg {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

/* Playful accent */
.accent-underline {
  position: relative;
}

.accent-underline::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--accent);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform 150ms ease-out;
}

.accent-underline:hover::after {
  transform: scaleX(1);
}

/* Pixelated image rendering for logo */
.pixelated {
  image-rendering: pixelated;
  image-rendering: -moz-crisp-edges;
  image-rendering: crisp-edges;
}

/* ============================================
   ACCESSIBILITY SETTINGS - CSS IMPLEMENTATION
   ============================================ */

/* Reduce Motion - Disable all animations and transitions */
html[data-reduce-motion="true"] *,
html[data-reduce-motion="true"] *::before,
html[data-reduce-motion="true"] *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
  scroll-behavior: auto !important;
}

/* Exception: Accessibility panel must always work, even with reduced motion */
html[data-reduce-motion="true"] [role="dialog"][aria-labelledby*="accessibility"],
html[data-reduce-motion="true"] [role="dialog"][aria-labelledby*="accessibility"] * {
  animation-duration: 0ms !important;
  transition-duration: 0ms !important;
  animation: none !important;
  transition: none !important;
}

/* High Contrast Mode */
html[data-contrast="high"] {
  --foreground: #000000;
  --background: #ffffff;
  --card-border: #333333;
}

html[data-contrast="high"] body {
  font-weight: 500;
}

/* Extra High Contrast Mode */
html[data-contrast="extra-high"] {
  --foreground: #000000;
  --background: #ffffff;
  --card-border: #000000;
  --accent: #cc0000;
  --success: #006600;
}

html[data-contrast="extra-high"] body {
  font-weight: 600;
}

html[data-contrast="extra-high"] a,
html[data-contrast="extra-high"] button {
  text-decoration: underline;
}

/* Pause Animations - Stop all CSS animations */
html[data-pause-animations="true"] * {
  animation-play-state: paused !important;
}

/* Colorblind Mode - Deuteranopia (Red-Green) */
html[data-colorblind-mode="deuteranopia"] {
  filter: url(#deuteranopia-filter);
}

/* Colorblind Mode - Protanopia (Red-Green) */
html[data-colorblind-mode="protanopia"] {
  filter: url(#protanopia-filter);
}

/* Colorblind Mode - Tritanopia (Blue-Yellow) */
html[data-colorblind-mode="tritanopia"] {
  filter: url(#tritanopia-filter);
}

/* Colorblind Mode - Monochrome */
html[data-colorblind-mode="monochrome"] {
  filter: grayscale(100%);
}

/* ============================================
   THE UNRUSHER ANIMATIONS
   ============================================ */

/* Slow pulse for calm tasks */
@keyframes pulse-slow {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.6;
  }
}

.animate-pulse-slow {
  animation: pulse-slow 3s ease-in-out infinite;
}

/* Floating seeds animation */
@keyframes float-seed {
  0% {
    transform: translateY(0) translateX(0) rotate(0deg);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    transform: translateY(400px) translateX(20px) rotate(180deg);
    opacity: 0;
  }
}

.animate-float-seed {
  animation: float-seed 8s ease-in-out infinite;
}

/* ============================================
   WHAT REALLY MATTERS ANIMATIONS
   ============================================ */

/* Watermelon slice scale animation */
@keyframes slice-shrink {
  from {
    transform: scale(1);
  }
  to {
    transform: scale(0.85);
  }
}

.animate-slice-shrink {
  animation: slice-shrink 0.3s ease-out forwards;
}

/* Drag indicator */
@keyframes drag-hint {
  0%, 100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-4px);
  }
}

.animate-drag-hint {
  animation: drag-hint 2s ease-in-out infinite;
}

/* ============================================
   PHASE 0: PLAYFUL MICRO-ANIMATIONS
   ============================================ */

/* Unexpected button squeeze animation */
.button-squeeze {
  transition: transform 150ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

.button-squeeze:active {
  transform: scale(0.92) rotate(-1deg);
}

/* Card hover with organic movement */
.card-hover-organic {
  transition: transform 300ms cubic-bezier(0.34, 1.56, 0.64, 1);
}

.card-hover-organic:hover {
  transform: translateY(-8px) rotate(1deg) scale(1.02);
}

/* Loading dots with watermelon colors */
@keyframes melon-dots {
  0%, 100% {
    background: var(--accent);
    transform: scale(1);
  }
  33% {
    background: var(--success);
    transform: scale(1.3);
  }
  66% {
    background: var(--melon-green);
    transform: scale(0.8);
  }
}

.loading-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--accent);
  animation: melon-dots 1.4s ease-in-out infinite;
}

.loading-dot:nth-child(2) {
  animation-delay: 0.2s;
}

.loading-dot:nth-child(3) {
  animation-delay: 0.4s;
}

/* Seed scatter animation (for success states) */
@keyframes seed-scatter {
  0% {
    transform: translate(0, 0) rotate(0deg) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(var(--scatter-x), var(--scatter-y)) rotate(360deg) scale(0);
    opacity: 0;
  }
}

.seed-scatter {
  animation: seed-scatter 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Blob float animation for organic decorations */
@keyframes blob-float {
  0%, 100% {
    transform: rotate(15deg) translateY(0) scale(1);
  }
  33% {
    transform: rotate(25deg) translateY(-20px) scale(1.1);
  }
  66% {
    transform: rotate(5deg) translateY(10px) scale(0.9);
  }
}

/* ============================================
   PHASE 0: CUSTOM FOCUS STATES
   ============================================ */

/* Watermelon-themed focus indicator */
*:focus-visible {
  outline: none;
  box-shadow:
    0 0 0 3px var(--background),
    0 0 0 6px var(--accent),
    0 0 12px 6px rgba(230, 57, 70, 0.2);
  border-radius: inherit;
  transition: box-shadow 150ms ease-out;
}

/* Animated focus ring pulse */
@keyframes focus-pulse {
  0%, 100% {
    box-shadow:
      0 0 0 3px var(--background),
      0 0 0 6px var(--accent),
      0 0 12px 6px rgba(230, 57, 70, 0.2);
  }
  50% {
    box-shadow:
      0 0 0 3px var(--background),
      0 0 0 6px var(--accent),
      0 0 16px 8px rgba(230, 57, 70, 0.3);
  }
}

button:focus-visible,
a:focus-visible {
  animation: focus-pulse 2s ease-in-out infinite;
}

/* Reduced motion: remove pulse */
@media (prefers-reduced-motion: reduce) {
  button:focus-visible,
  a:focus-visible {
    animation: none;
  }
}

/* High contrast mode: extra visible focus rings */
html[data-contrast="extra-high"] *:focus-visible {
  box-shadow:
    0 0 0 3px var(--background),
    0 0 0 6px #000000;
}


/* ============================================
   PHASE 1: TOAST ANIMATIONS
   ============================================ */

@keyframes slide-in-right {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.animate-slide-in-right {
  animation: slide-in-right 0.3s ease-out;
}

